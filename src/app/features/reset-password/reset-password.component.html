<div class="reset-password-page">
  <div class="reset-password-container">
    <!-- Logo -->
    <div class="logo-section">
      <img src="assets/logo-dark-t.png" alt="AnaTaleb" class="logo">
    </div>

    <!-- Validating Token State -->
    <div *ngIf="isValidating" class="validating-state">
      <div class="spinner-large"></div>
      <h2>{{ 'general.validating' | translate }}...</h2>
      <p>{{ 'general.pleasewait' | translate }}</p>
    </div>

    <!-- Invalid Token State -->
    <div *ngIf="!isValidating && !isValidToken" class="error-state">
      <div class="error-icon">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="32" cy="32" r="32" fill="#EF4444" fill-opacity="0.1"/>
          <path d="M32 20V32M32 44H32.02" stroke="#EF4444" stroke-width="3" stroke-linecap="round"/>
        </svg>
      </div>
      <h2>{{ 'general.invalidToken' | translate }}</h2>
      <p>{{ 'general.unexpectedError' | translate }}</p>
      
      <button class="btn-primary" (click)="goToHomePage()">
        {{ 'general.backToHome' | translate }}
      </button>
    </div>

    <!-- Success State -->
    <div *ngIf="!isValidating && isSuccess" class="success-state">
      <div class="success-icon">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="32" cy="32" r="32" fill="#10B981" fill-opacity="0.1"/>
          <path d="M44 24L28 40L20 32" stroke="#10B981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h2>{{ 'general.passwordResetSuccessfully' | translate }}</h2>
      <p>{{ 'general.passwordResetSuccessfullyMessage' | translate }}</p>
      
      <button class="btn-primary" (click)="goToHomePage()">
        {{ 'general.backToLoginPage' | translate }}
      </button>
    </div>

    <!-- Reset Password Form -->
    <div *ngIf="!isValidating && isValidToken && !isSuccess" class="form-state">
      <h2 class="page-title">{{ 'general.resetPassword' | translate }}</h2>
      <p class="page-subtitle">{{ 'general.createNewPassword' | translate }}</p>

      <form (ngSubmit)="onSubmit()" class="reset-form">
        <!-- New Password Field -->
        <div class="form-group">
          <label for="newPassword" class="form-label">
            {{ 'general.newpassword' | translate }} *
          </label>
          <div class="password-input-wrapper">
            <input
              [type]="showNewPassword ? 'text' : 'password'"
              id="newPassword"
              name="newPassword"
              [(ngModel)]="newPassword"
              class="form-input"
              [placeholder]="'general.enteryournewpassword' | translate"
              required
            />
            <button
              type="button"
              class="password-toggle"
              (click)="toggleNewPasswordVisibility()"
              [attr.aria-label]="showNewPassword ? 'Hide password' : 'Show password'">
              <svg *ngIf="!showNewPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
              <svg *ngIf="showNewPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20C5 20 1 12 1 12A18.45 18.45 0 0 1 5.06 5.06L17.94 17.94Z" stroke="currentColor" stroke-width="2"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4C19 4 23 12 23 12A18.5 18.5 0 0 1 19.24 16.1L9.9 4.24Z" stroke="currentColor" stroke-width="2"/>
                <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
          <div class="error-message" *ngIf="validationErrors.newPassword">
            {{ validationErrors.newPassword }}
          </div>
          <div class="help-text">{{ 'general.passwordMustBe8Characters' | translate }}</div>
        </div>

        <!-- Confirm Password Field -->
        <div class="form-group">
          <label for="confirmPassword" class="form-label">
            {{ 'general.confirmpassword' | translate }} *
          </label>
          <div class="password-input-wrapper">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              class="form-input"
              [placeholder]="'general.enteryourconfirmpassword' | translate"
              required
            />
            <button
              type="button"
              class="password-toggle"
              (click)="toggleConfirmPasswordVisibility()"
              [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'">
              <svg *ngIf="!showConfirmPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
              <svg *ngIf="showConfirmPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20C5 20 1 12 1 12A18.45 18.45 0 0 1 5.06 5.06L17.94 17.94Z" stroke="currentColor" stroke-width="2"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4C19 4 23 12 23 12A18.5 18.5 0 0 1 19.24 16.1L9.9 4.24Z" stroke="currentColor" stroke-width="2"/>
                <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
          <div class="error-message" *ngIf="validationErrors.confirmPassword">
            {{ validationErrors.confirmPassword }}
          </div>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn-primary"
          [disabled]="isSubmitting || !newPassword || !confirmPassword">
          <span *ngIf="!isSubmitting">{{ 'general.resetPassword' | translate }}</span>
          <span *ngIf="isSubmitting" class="submitting-state">
            <span class="spinner"></span>
            {{ 'general.resetting' | translate }}
          </span>
        </button>
      </form>

      <!-- Back to Login Link -->
      <div class="back-to-login">
        <button class="link-button" (click)="goToHomePage()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M15 10H5M10 15L5 10L10 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          {{ 'general.backToLoginPage' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>

